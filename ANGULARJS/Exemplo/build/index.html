<!DOCTYPE html>
<html lang="pt-br" ng-app="Aula5">
	<head>
		<meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	    <meta name="viewport" content="width=device-width, initial-scale=1">
	    <!-- Bootstrap -->
   		<link href="../src/css/bootstrap.min.css" rel="stylesheet">
   		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
	    <script src="../src/js/jquery.min.js"></script>
	    <!-- Include all compiled plugins (below), or include individual files as needed -->
	    <script src="../src/js/bootstrap.min.js"></script>

		<title>Aula 4</title>
		<!-- <link rel="stylesheet" href=""> -->
		<script src="../src/js/angular.min.js" type="text/javascript"></script>
		<script>
			angular.module('Aula5',[]).controller('MeuController', function($scope, $http ){
				
				$scope.nomelistaPessoas = "Lista de pessoas";
				$scope.listaPessoas = [];

				$scope.pessoa1 = {
									"nome":"Roger",
									"idade":34,
									"pais":"Brasil",
								 };

				$scope.pessoa2 = {
									"nome":"João",
									"idade":20,
									"pais":"Brasil",
								 };

				$scope.pessoa3 = {
									"nome":"Matheus",
									"idade":20,
									"pais":"Brasil",
								 };

				$scope.pessoa4 = {
									"nome":"Vitor",
									"idade":20,
									"pais":"Brasil",
								 };				 

				$scope.listaPessoas.push($scope.pessoa1);				 	
				$scope.listaPessoas.push($scope.pessoa2);				 	
				$scope.listaPessoas.push($scope.pessoa3);				 	
				$scope.listaPessoas.push($scope.pessoa4);

				$scope.exibirFormularioInclusao = false;

				$scope.incluirPessoa = function() {
					$scope.listaPessoas.push({
												nome: $scope.formInclusao.nome, 
												idade: $scope.formInclusao.idade, 
												pais: $scope.formInclusao.pais 
											});
					$scope.formInclusao = {
											"nome":"",
											"idade":"",
											"pais": ""
										  }
				}

				$scope.excluirPessoa = function(sNome){
					$scope.listaPessoasNova = $scope.listaPessoas.filter(
												function(pessoa){ 
													return pessoa.nome != sNome;
												});
					$scope.listaPessoas = $scope.listaPessoasNova;
				}

				$scope.carregarPessoas = function(){
					$scope.carregandoPessoas = true;
					$http({
						url: 'pessoas.json',
						method: 'GET'
					}).then(function(resposta){
						$scope.listaPessoas  = resposta.data;
					},function(resposta){
						alert('algum erro');
					}).finally(function(){
						$scope.carregandoPessoas = false;
					})
				}

			});
		</script>
	</head>
	<body ng-controller="MeuController">
		<div class="container">
			<div class="jumbotron">
			  <h1>Aula 4</h1>
			  <p>...</p>
			  <p><a class="btn btn-primary btn-lg" href="#" ng-click="exibirFormularioInclusao = true;" role="button">Incluir Pessoa</a></p>
			  <p><a class="btn btn-primary btn-lg" href="#" ng-click="carregarPessoas();" ng-disabled="$scope.carregandoPessoas" role="button">carregar Pessoa</a></p>

			</div>
			<div class="panel panel-default" ng-show="exibirFormularioInclusao">
			  <div class="panel-heading">Inclusão de pessoa</div>
			  <div class="panel-body">
			   	<div class="form-group">
			   		<label>Nome</label>
			   		<input type="text" class="form-control" ng-model="formInclusao.nome">
			   	</div>
			   	<div class="form-group">
			   		<label>Idade</label>
			   		<input type="text" class="form-control" ng-model="formInclusao.idade">
			   	</div>
			   	<div class="form-group">
			   		<label>País</label>
			   		<input type="text" class="form-control" ng-model="formInclusao.pais">
			   	</div>

				<button class="btn btn-defaut" ng-click="incluirPessoa(pessoa.nome)">Incluir</button>

			  </div>
			</div>
			<li ng-repeat="pessoa in listaPessoas">
				<div class="panel panel-default">
				  <div class="panel-heading">{{ pessoa.nome }}</div>
				  <div class="panel-body">
				   	<ul>
				   		<li>{{ pessoa.idade }}</li>
				   		<li>{{ pessoa.pais }}</li>
				   	</ul>
				   	<button class="btn btn-defaut" ng-click="excluirPessoa(pessoa.nome)">Excluir</button>
				  </div>
				</div>
			</li>
		</div>

	</body>
</html>


